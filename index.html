<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>听写学习应用</title>
    <script>
              // 紧急错误处理
              window.onerror = function (msg, url, line) {
                console.error('[Fatal Error]', msg, url, line);
                // 如果是生产环境白屏，很可能是 React 没加载成功
                if (msg.indexOf('React is not defined') > -1) {
                  alert('核心库加载失败，请检查网络或刷新重试');
                }
                return false;
              };

      window.PAGELOAD_START = performance.now();
          window.PERF_LOGS = [];
          function logPerf(msg) {
            const t = (performance.now() - window.PAGELOAD_START).toFixed(2);
            const fullMsg = `[Performance] ${msg} (${t}ms)`;
            window.PERF_LOGS.push(fullMsg);
            console.log(fullMsg);
          }
          logPerf('1. HTML 解析开始');
    </script>
  </head>
  <body>
    <div id="root"></div>
    <!-- 性能监控 -->
    <script>
          // 这里的 logPerf 依然有效，可以记录 Vite 打包后的加载耗时
          window.addEventListener('load', () => {
            logPerf('3. 页面完全加载完成');
            if (window.PERF_LOGS) {
              console.log('--- 性能日志回放 ---');
              window.PERF_LOGS.forEach(log => console.log(log));
            }
        });
</script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>

