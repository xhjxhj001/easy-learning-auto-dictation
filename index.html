<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>听写学习应用</title>
    <script>
      window.PAGELOAD_START = performance.now();
          window.PERF_LOGS = [];
          function logPerf(msg) {
            const t = (performance.now() - window.PAGELOAD_START).toFixed(2);
            const fullMsg = `[Performance] ${msg} (${t}ms)`;
            window.PERF_LOGS.push(fullMsg);
            console.log(fullMsg);
          }
          logPerf('1. HTML 解析开始');
    </script>
  </head>
  <body>
    <div id="root"></div>
    <!-- 仅在生产环境（通过域名访问）时使用 CDN，开发环境禁止加载，避免干扰和重复 -->
    <script>
      const isDev = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
      if (!isDev) {
        logPerf('2. 开始加载 CDN 资源...');
        const scripts = [
          "https://lib.baomitu.com/react/18.2.0/umd/react.production.min.js",
          "https://lib.baomitu.com/react-dom/18.2.0/umd/react-dom.production.min.js",
          "https://lib.baomitu.com/dayjs/1.11.10/dayjs.min.js",
          "https://lib.baomitu.com/antd/5.12.8/antd.min.js"
        ];
        scripts.forEach(src => {
          document.write('<script src="' + src + '"><\/script>');
        });
        window.addEventListener('load', () => logPerf('3. CDN 资源加载完成'));
      } else {
        logPerf('2. 开发环境跳过 CDN 加载');
      }
    </script>
    
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>

